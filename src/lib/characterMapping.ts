// キャラクターIDと相性データの完全定義

// ■ 1. キャラクターID定義 (Master Map)
// ID: 1~16, Code: NightCode
export const characterIdMap = {
  1:  { code: 'ARTN', male: '絶対君主',           female: '冷徹な女帝' },
  2:  { code: 'AFTN', male: '夜のCEO',            female: '氷の美貌' },
  3:  { code: 'AREN', male: '過保護なパトロン',   female: '過保護なママ' },
  4:  { code: 'AFEN', male: '愛の教祖',           female: '魔性の聖女' },
  5:  { code: 'ARTC', male: '暴走ダンプカー',     female: '肉食系ハンター' },
  6:  { code: 'AFTC', male: '夜のジョーカー',     female: '小悪魔な発明家' },
  7:  { code: 'AREC', male: '自意識過剰なスター', female: 'スポットライト女優' },
  8:  { code: 'AFEC', male: '気まぐれピーターパン', female: '無邪気なティンカーベル' },
  9:  { code: 'PRTN', male: '生真面目な公務員',   female: '鉄壁のガードマン' },
  10: { code: 'PFTN', male: 'ソロプレイヤー',     female: '冷めた脚本家' },
  11: { code: 'PRTC', male: '無口なスナイパー',   female: '無口なテクニシャン' },
  12: { code: 'PFTC', male: '性癖研究員',         female: '変態リケジョ' },
  13: { code: 'PREN', male: '忠実な番犬',         female: '従順な夜の秘書' },
  14: { code: 'PFEN', male: '愛の執行人',         female: '心中ロマンチスト' },
  15: { code: 'PREC', male: '感度3000倍のオス猫', female: 'とろける猫' },
  16: { code: 'PFEC', male: '夢見る詩人',         female: '悲劇のヒロイン' }
} as const;

// ■ 2. 相性マトリクス (Compatibility Matrix)
export const compatibilityMatrix = {
  // 1. ARTN
  1: { best: 13, good: 15, worst: 8 },
  // 2. AFTN
  2: { best: 15, good: 16, worst: 1 },
  // 3. AREN
  3: { best: 8,  good: 16, worst: 10 },
  // 4. AFEN
  4: { best: 16, good: 14, worst: 11 },
  // 5. ARTC
  5: { best: 14, good: 5,  worst: 13 },
  // 6. AFTC
  6: { best: 13, good: 9,  worst: 16 },
  // 7. AREC
  7: { best: 10, good: 7,  worst: 14 },
  // 8. AFEC
  8: { best: 9,  good: 8,  worst: 3 },
  // 9. PRTN
  9: { best: 6,  good: 8,  worst: 5 },
  // 10. PFTN
  10: { best: 7,  good: 6,  worst: 3 },
  // 11. PRTC
  11: { best: 4,  good: 11, worst: 16 },
  // 12. PFTC
  12: { best: 4,  good: 12, worst: 1 },
  // 13. PREN
  13: { best: 6,  good: 1,  worst: 5 },
  // 14. PFEN
  14: { best: 5,  good: 14, worst: 9 },
  // 15. PREC
  15: { best: 2,  good: 1,  worst: 10 },
  // 16. PFEC
  16: { best: 3,  good: 2,  worst: 11 }
} as const;

// コードからIDを取得
export function getCharacterIdByCode(code: string): number | null {
  for (const [id, data] of Object.entries(characterIdMap)) {
    if (data.code === code) {
      return parseInt(id);
    }
  }
  return null;
}

// IDからキャラクター情報を取得
export function getCharacterById(id: number, gender: 'male' | 'female') {
  const character = characterIdMap[id as keyof typeof characterIdMap];
  if (!character) return null;
  
  return {
    code: character.code,
    name: character[gender],
    id
  };
}

// ■ 3. 詳細相性説明データ
export const detailedCompatibilityReasons = {
  // ==========================================
  // 👨 男性キャラクター (Male)
  // ==========================================
  
  // M01: ARTN (Active/Real/Tech/Normal) - 元:ESTJ
  'ARTN_M': {
    name: '絶対君主',
    best_reason: '最強の「S」と最強の「M」の組み合わせ。彼女は「言われた通りにしたい」「責任を負いたくない」と思っている受け身なタイプなので、あなたの「全部俺が決める」というスタイルに、この上ない安心感と喜びを感じます。',
    worst_reason: '彼女は自由奔放な宇宙人です。あなたが「こうしろ」と命令しても、「えー、こっちの方が楽しくない？」と平気でルールを破ってきます。あなたの完璧なシナリオは崩壊し、プライドはズタズタになります。'
  },
  
  // M02: ARTC (Active/Real/Tech/Chaos) - 元:ESTP
  'ARTC_M': {
    name: '暴走ダンプカー',
    best_reason: '一見正反対ですが、最強の相性です。彼女は内面に激しい情熱とマゾヒズムを秘めています。あなたの強引で理屈抜きのセックスが、彼女の理性の殻を打ち砕き、抑圧されていた本能を解放させます。',
    worst_reason: '彼女は丁寧な手順と、安心感を求めるタイプです。あなたの「いきなり本番」「場所を選ばない」というスタイルは、彼女にとってただの暴力であり恐怖です。あなたが燃え上がるほど、彼女は冷めていきます。'
  },

  // M03: AREN (Active/Real/Emo/Normal) - 元:ESFJ
  'AREN_M': {
    name: '過保護なパトロン',
    best_reason: '彼女は生活能力がなく危なっかしいので、あなたの「世話を焼きたい欲」を極限まで刺激します。彼女がわがままを言えば言うほど、あなたは「しょうがないな」と嬉しそうに尽くし、共依存の沼へと落ちていきます。',
    worst_reason: '彼女は自立心が強く、一人の時間を愛するタイプです。あなたの「寒くない？」「大丈夫？」という過剰な気遣いを、「うるさい」「放っておいて」と冷たくあしらいます。良かれと思った行動を全否定されます。'
  },

  // M04: AREC (Active/Real/Emo/Chaos) - 元:ESFP
  'AREC_M': {
    name: '自意識過剰なスター',
    best_reason: '彼女は感情表現が苦手でクールですが、内面では情熱的なドラマを求めています。あなたのオーバーリアクションで情熱的なセックスは、彼女の脳内シミュレーションを現実化してくれる刺激的な体験となります。',
    worst_reason: '彼女は「ルール」と「常識」を重んじるタイプです。あなたの「今ここを楽しもう」という無計画な提案を、「不潔」「時間は守って」と一刀両断します。あなたのユーモアは通じず、ただのふざけた男として軽蔑されます。'
  },

  // M05: AFTN (Active/Fantasy/Tech/Normal) - 元:ENTJ
  'AFTN_M': {
    name: '夜のCEO',
    best_reason: '彼女は理屈抜きで感覚的に生きています。あなたが何もしなくても、雰囲気だけで感じてくれる感受性豊かなM気質。あなたの計算以上に完璧なリアクションを返してくれるため、支配欲が満たされまくります。',
    worst_reason: '主導権を巡る冷戦が勃発します。彼女もまた、自分がルールでありたいタイプ。「そこじゃない、もっと右」といちいち指図されると、あなたのプライドは傷つき、「じゃあ自分でやれば？」と吐き捨てて帰りたくなります。'
  },

  // M06: AFTC (Active/Fantasy/Tech/Chaos) - 元:ENTP
  'AFTC_M': {
    name: '夜のジョーカー',
    best_reason: '彼女は「相手の望みを叶えたい」という献身的なタイプです。あなたの突拍子もない提案や、マニアックなプレイにも、「あなたがしたいなら…」と顔を赤らめながら付き合ってくれる、最高のおもちゃになります。',
    worst_reason: '彼女は「効率」と「結果」を重んじるタイプです。あなたの「これ試そう」という実験的な提案を、「無駄」「意味がわからない」と切り捨てます。あなたの知的好奇心は満たされず、退屈な夜になります。'
  },

  // M07: AFEN (Active/Fantasy/Emo/Normal) - 元:ENFJ
  'AFEN_M': {
    name: '愛の教祖',
    best_reason: '彼女は愛に飢えていて、ドラマチックな展開を夢見ています。あなたの「君は特別だ」「運命だ」という言葉を疑うことなく信じ、涙を流して喜んでくれるでしょう。二人の世界に完全に没入し、周りが見えなくなるほど愛し合えます。',
    worst_reason: '彼女は愛の言葉よりも、技術と結果を求めるドライなタイプです。あなたが「愛してる」と囁いても、「うん、いいから動いて」と事務的に返されます。あなたの情熱的な演出はすべてスルーされ、深い虚しさを感じます。'
  },

  // M08: AFEC (Active/Fantasy/Emo/Chaos) - 元:ENFP
  'AFEC_M': {
    name: '気まぐれピーターパン',
    best_reason: '彼女は真面目でルールを守るタイプなので、あなたの自由さに最初は呆れます。しかし、あなたの予想外の行動が、彼女の退屈な日常を壊し、新しい世界を見せてくれることに気づくと、一気に惹かれます。',
    worst_reason: '彼女は「結婚は？」「将来は？」と、枠にハメようとしてくる管理魔です。あなたの自由を愛する魂は、彼女の重たい愛とルールに窒息しそうになります。「ちゃんと話し合おう」と迫る彼女から、あなたは逃げ出します。'
  },

  // M09: PRTN (Passive/Real/Tech/Normal) - 元:ISTJ
  'PRTN_M': {
    name: '生真面目な公務員',
    best_reason: '一見、水と油のようですが、実は相性が良いです。彼女の突拍子もないアイデアや実験的なプレイは、マンネリを感じているあなたの深層心理に強烈な刺激を与えます。「そんなのアリ？」と驚きながらもハマってしまいます。',
    worst_reason: '彼女は計画性のないカオスそのものです。「今から海行こう！」と夜中に叩き起こされたり、手順を無視して暴走されたりすることに、あなたは強烈なストレスを感じます。あなたの正論は彼女には届きません。'
  },

  // M10: PRTC (Passive/Real/Tech/Chaos) - 元:ISTP
  'PRTC_M': {
    name: '無口なスナイパー',
    best_reason: '彼女は感情豊かで、愛の言葉をたくさんくれます。あなたの無口さを「クールで素敵」とポジティブに解釈し、足りない情緒を彼女の愛で埋めてくれます。また、尽くすタイプなので、あなたの技術に全力で反応してくれます。',
    worst_reason: '彼女はセックスに「物語」や「ムード」を求めるロマンチストです。あなたの事務的で技術特化なセックスを、「愛がない」「ただの作業」と捉えて深く傷つきます。「もっと愛を囁いて」と泣く彼女を見て、あなたは面倒になります。'
  },

  // M11: PREN (Passive/Real/Emo/Normal) - 元:ISFJ
  'PREN_M': {
    name: '忠実な番犬',
    best_reason: '彼女はSっ気があり、いたずら好きで好奇心旺盛です。あなたの従順さを面白がり、色々なプレイを試したり、ちょっと意地悪な命令をしたりして可愛がってくれます。あなたは彼女のおもちゃになることに至上の喜びを感じます。',
    worst_reason: '彼女は野性的で、強いオスを求めるタイプです。あなたの「どうしたい？」と聞く姿勢や、従順な態度を「頼りない」「男らしくない」と一蹴します。あなたが尽くせば尽くすほど、彼女は物足りなさを感じてしまいます。'
  },

  // M12: PREC (Passive/Real/Emo/Chaos) - 元:ISFP
  'PREC_M': {
    name: '感度3000倍のオス猫',
    best_reason: '彼女は「私が管理してあげなきゃ」という姉御肌タイプ。あなたの頼りなさと可愛さは、彼女にとって最高に守ってあげたい対象です。あなたが彼女のルールに従って甘えることで、完璧な「飼い主とペット」の関係が成立します。',
    worst_reason: '彼女は向上心が高く、能力のある男を好みます。あなたの「なんとかなるさ」という緩い態度や、甘えるだけの姿勢を「向上心がない」「頼りない」と切り捨てます。彼女の冷たい視線にあなたは怯え、逃げ出すことになるでしょう。'
  },

  // M13: PFTN (Passive/Fantasy/Tech/Normal) - 元:INTJ
  'PFTN_M': {
    name: 'ソロプレイヤー',
    best_reason: '彼女は「今ここ」を楽しむ天才で、あなたに足りない「感情」と「現実感」をこれでもかとぶつけてきます。あなたの理屈っぽい分析も「すごーい！博士みたい！」と無邪気に受け入れ、強引に現実の世界へ引き戻してくれます。',
    worst_reason: '彼女は「もっと話そうよ」「愛してるって言って」と、感情の交流を強要してきます。一人の時間を愛するあなたにとって、彼女の干渉はただのノイズ。「うるさい」「放っておいてくれ」と心を閉ざすことになります。'
  },

  // M14: PFTC (Passive/Fantasy/Tech/Chaos) - 元:INTP
  'PFTC_M': {
    name: '性癖研究員',
    best_reason: '彼女は包容力があり、あなたの奇行やマニアックな性癖も「面白い」「個性的」と受け入れてくれます。あなたの分析好きな性格を理解し、実験台になることも楽しんでくれる稀有な存在。冷めた分析脳を溶かす良いスパイスになります。',
    worst_reason: '彼女は「普通」や「常識」を重んじるタイプです。あなたのマニアックな提案や理屈っぽい解説に、「キモい」「普通にして」と容赦ない拒絶を突きつけます。あなたの知的好奇心は否定され、変な男として処理されます。'
  },

  // M15: PFEN (Passive/Fantasy/Emo/Normal) - 元:INFJ
  'PFEN_M': {
    name: '愛の執行人',
    best_reason: '彼女は野性的で刺激を求めるタイプですが、実は内面に孤独を抱えています。あなたの重すぎる愛と執着は、彼女にとって「ここまで愛されたのは初めて」という新鮮な衝撃となります。彼女の激しさをあなたの深さが受け止めます。',
    worst_reason: '彼女は現実的で、常識的な恋愛を好みます。あなたの「永遠」とか「魂」とかいうスピリチュアルで重い言動に、ドン引きします。「重い」「怖い」「普通にして」と正論で返され、あなたの繊細な心は深く傷つきます。'
  },

  // M16: PFEC (Passive/Fantasy/Emo/Chaos) - 元:INFP
  'PFEC_M': {
    name: '夢見る詩人',
    best_reason: '彼女は現実的ですが、世話焼きで愛情深いタイプです。あなたの夢見がちな部分を「可愛い」と受け止め、現実的な部分をサポートしてくれます。あなたがポエムを呟いても、彼女は優しく聞いてくれるので、安心して自分の世界に浸れます。',
    worst_reason: '彼女は超現実主義で、効率を求めるタイプです。あなたのロマンチックな演出や回りくどい言葉を、「で、結局何がしたいの？」「早くして」とバッサリ切り捨てます。あなたの繊細な心は粉々に砕け、二度と立ち直れないでしょう。'
  },


  // ==========================================
  // 👩 女性キャラクター (Female)
  // ==========================================

  // F01: ARTN (Active/Real/Tech/Normal) - 元:ESTJ
  'ARTN_F': {
    name: '冷徹な女帝',
    best_reason: '彼はM気質で、強い女性に憧れを持っています。あなたの冷たい態度や命令を「高貴で美しい」と脳内で美化し、喜んで下僕になってくれます。あなたが何を言っても傷つかず、むしろ詩的な言葉で賛美してくれる最高の信者です。',
    worst_reason: '彼は理屈っぽく、あなたの権威に屈しません。あなたが命令しても、「なぜそうする必要があるの？」「効率が悪いよ」と論理的に反論してきます。あなたのプライドは傷つけられ、ムードも最悪になります。'
  },

  // F02: ARTC (Active/Real/Tech/Chaos) - 元:ESTP
  'ARTC_F': {
    name: '肉食系ハンター',
    best_reason: '彼は重い愛を持っていますが、内気で自分からは動けません。あなたの強引なリードが、彼の殻を破り、激しい情熱を引き出します。彼も「ここまで求められたのは初めて」と感動し、あなたに尽くすようになるでしょう。',
    worst_reason: '彼はロマンチックなムードや、繊細な前戯を求めます。あなたの「とりあえずヤろう」というガサツな態度に、彼は「デリカシーがない」「愛がない」と深く傷つきます。あなたが迫れば迫るほど、彼は怯えて逃げ出してしまいます。'
  },

  // F03: AREN (Active/Real/Emo/Normal) - 元:ESFJ
  'AREN_F': {
    name: '過保護なママ',
    best_reason: '彼は言葉足らずで不器用ですが、技術は一流です。あなたの過保護な愛を黙って受け入れ、行動（セックス）で返してくれます。彼が何も言わなくても、あなたは「照れてるのね」とポジティブに解釈し、世話を焼き続けられます。',
    worst_reason: '彼は自由を愛し、束縛を何より嫌います。あなたの「どこ行くの？」「何時に帰るの？」という質問攻めに、彼は窒息しそうになります。あなたの愛を「重い」と感じた彼は、すぐに他の軽い女性の元へ飛んでいってしまうでしょう。'
  },

  // F04: AREC (Active/Real/Emo/Chaos) - 元:ESFP
  'AREC_F': {
    name: 'スポットライト女優',
    best_reason: '彼は感情表現が苦手でクールですが、あなたの明るさと強引な「私を見て」アピールに、実は救われます。あなたの裏表のないナルシストぶりを「面白い生き物だ」と観察対象として愛でてくれるでしょう。',
    worst_reason: '彼は「魂の融合」を求める重たいタイプです。あなたの「可愛く見られたい」という表面的な欲求を、「愛がない」「浅い」と見抜いてしまいます。「本当の君を見せて」と迫る彼に、あなたは「うざい」「重い」と拒否反応を示すでしょう。'
  },

  // F05: AFTN (Active/Fantasy/Tech/Normal) - 元:ENTJ
  'AFTN_F': {
    name: '氷の美貌',
    best_reason: '彼は感覚的で甘えん坊なM気質です。あなたの冷たい態度にもめげず、「かまって」「すごかったね」と無邪気に懐いてきます。あなたが彼を管理・支配することで、彼は安心してあなたに依存し、あなたも彼を可愛がるでしょう。',
    worst_reason: '彼は尽くすタイプですが、少し重たくて粘着質です。「大丈夫？」「寒くない？」といちいち聞いてくる彼の態度を、あなたは「うっとうしい」「自分で判断して」と感じます。彼の献身はあなたには届きません。'
  },

  // F06: AFTC (Active/Fantasy/Tech/Chaos) - 元:ENTP
  'AFTC_F': {
    name: '小悪魔な発明家',
    best_reason: '彼は従順で、あなたのどんな提案にも「君がしたいなら…」と付き合ってくれます。あなたが無理難題を言っても、一生懸命に応えようとする彼の姿は、あなたにとって最高に可愛くて面白いおもちゃです。',
    worst_reason: '彼はルールと常識の塊です。あなたの「スリルを楽しもう」という提案を、「不潔」「非常識」と全否定します。あなたのジョークも通じず、真顔で説教されることに。「つまんない男」と認定し、すぐに冷めるでしょう。'
  },

  // F07: AFEN (Active/Fantasy/Emo/Normal) - 元:ENFJ
  'AFEN_F': {
    name: '魔性の聖女',
    best_reason: '彼は技術はありますが、愛の言葉を囁くのは苦手です。あなたが言葉で埋め合わせをし、彼の技術を褒めちぎることで、彼のプライドを満たします。また、彼のクールな態度も、あなたには「私だけに見せる素顔」として映り、独占欲を満たしてくれます。',
    worst_reason: '彼は自立心が強く、感情的な繋がりを求めません。あなたの「心も体も一つになりたい」という重たいアプローチを、「面倒くさい」「依存しないで」と拒絶します。あなたの聖女の微笑みも、彼には「偽善」と映り、全く通用しません。'
  },

  // F08: AFEC (Active/Fantasy/Emo/Chaos) - 元:ENFP
  'AFEC_F': {
    name: '無邪気なティンカーベル',
    best_reason: '彼は真面目で堅物ですが、あなたの自由さに振り回されることを、実は楽しんでいます。彼があなたのブレーキ役となり、あなたが彼の退屈な日常を壊すアクセル役となる。正反対だからこそ、お互いに無いものを補い合えるベストパートナーです。',
    worst_reason: '彼は「心配だから」「愛してるから」と、あなたを管理しようとします。あなたの自由な行動を「危なっかしい」と制限し、説教してくる彼に、あなたは息苦しさを感じます。「パパみたいでつまんない」と、すぐに逃げ出してしまうでしょう。'
  },

  // F09: PRTN (Passive/Real/Tech/Normal) - 元:ISTJ
  'PRTN_F': {
    name: '鉄壁のガードマン',
    best_reason: '彼は不真面目でチャラそうに見えますが、実は頭が良く、あなたの堅さを面白がってくれます。彼が強引にあなたの壁を壊し、新しい世界を見せてくれることで、あなたは今まで知らなかった快楽や楽しさを知ることができます。',
    worst_reason: '彼は計画性がなく、その場のノリで生きています。「今日泊まろうよ」と急に言ってくる彼に、あなたは「準備してないから無理」とイライラします。あなたのルールをことごとく破る彼に、あなたはストレスを感じます。'
  },

  // F10: PRTC (Passive/Real/Tech/Chaos) - 元:ISTP
  'PRTC_F': {
    name: '無口なテクニシャン',
    best_reason: '彼は感情表現が豊かで、あなたの言葉足らずな部分を補ってくれます。あなたが言葉にしなくても、彼はあなたの行動から愛を汲み取ってくれるため、一緒にいて楽です。また、あなたの技術を「すごいね」「最高だよ」と褒めちぎってくれるので、自信にも繋がります。',
    worst_reason: '彼はセックスに「物語」や「ムード」を求めるロマンチストです。あなたの事務的で技術特化なセックスを、「愛がない」「ただの作業」と捉えて深く傷つきます。「もっと愛を囁いて」と泣く彼を見て、あなたは「面倒くさい」と冷めてしまうでしょう。'
  },

  // F11: PREN (Passive/Real/Emo/Normal) - 元:ISFJ
  'PREN_F': {
    name: '従順な夜の秘書',
    best_reason: '彼はSっ気があり、好奇心旺盛で色々なプレイを試したがります。あなたの「なんでも受け入れる」という従順さは、彼にとって最高のおもちゃです。彼が提案する新しい遊びに、あなたが恥ずかしがりながらも付き合うことで、二人の夜は常に新鮮で刺激的なものになります。',
    worst_reason: '彼は野性的で、自分と同じように激しく求める女性を好みます。あなたの受け身で消極的な態度を「つまらない」「マグロ」と感じてしまいます。あなたが尽くせば尽くすほど、彼は物足りなさを感じ、他の激しい女性の元へ行ってしまうでしょう。'
  },

  // F12: PREC (Passive/Real/Emo/Chaos) - 元:ISFP
  'PREC_F': {
    name: 'とろける猫',
    best_reason: '彼は支配欲が強く、相手を管理したいタイプです。あなたの無防備で頼りない姿は、彼にとって最高に守りたくなる（管理したくなる）対象です。あなたが彼のルールに従って甘えることで、彼の自尊心も満たされ、完璧な「飼い主とペット」の関係が成立します。',
    worst_reason: '彼は向上心が高く、能力のある女性を好みます。あなたの「なんとかなるさ」という緩い態度や、甘えるだけの姿勢を「中身がない」「自立していない」と切り捨てます。彼の冷たい正論にあなたは怯え、居心地の悪さを感じて逃げ出すでしょう。'
  },

  // F13: PFTN (Passive/Fantasy/Tech/Normal) - 元:INTJ
  'PFTN_F': {
    name: '冷めた脚本家',
    best_reason: '彼は単純で明るく、あなたの冷めた態度も気にせずグイグイ来ます。あなたが頭で考えすぎて動けない時、彼が強引に手を引いて現実の楽しさを教えてくれます。彼のバカっぽさに呆れながらも、裏表のない彼にだけは心を許せるでしょう。',
    worst_reason: '彼は「もっと話そうよ」「愛してるって言って」と、感情の交流を強要してきます。一人の時間を愛し、感情表現が苦手なあなたにとって、彼の干渉はただのノイズ。「うるさい」「放っておいて」と心を閉ざすことになります。'
  },

  // F14: PFTC (Passive/Fantasy/Tech/Chaos) - 元:INTP
  'PFTC_F': {
    name: '変態リケジョ',
    best_reason: '彼は包容力があり、あなたの奇行やマニアックな性癖も「面白い」「個性的」と受け入れてくれます。あなたの分析好きな性格を理解し、実験台になることも楽しんでくれる稀有な存在。彼の情熱が、あなたの冷めた分析脳を溶かす良いスパイスになります。',
    worst_reason: '彼は「普通」や「常識」を重んじるタイプです。あなたのマニアックな提案や理屈っぽい解説に、「キモい」「女の子らしくして」と容赦ない拒絶を突きつけます。あなたの知的好奇心は否定され、ただの変な女として処理される悲しい結末が待っています。'
  },

  // F15: PFEN (Passive/Fantasy/Emo/Normal) - 元:INFJ
  'PFEN_F': {
    name: '心中ロマンチスト',
    best_reason: '彼は野性的で刺激を求めるタイプですが、実は内面に孤独を抱えています。あなたの重すぎる愛と執着は、彼にとって「ここまで愛されたのは初めて」という新鮮な衝撃となります。彼の激しさをあなたの深さが受け止め、お互いに欠けている部分を埋め合えます。',
    worst_reason: '彼は現実的で、常識的な恋愛を好みます。あなたの「永遠」とか「魂」とかいうスピリチュアルで重い言動に、ドン引きします。「重い」「怖い」「普通にして」と正論で返され、あなたの繊細な心は深く傷つき、闇落ちするでしょう。'
  },

  // F16: PFEC (Passive/Fantasy/Emo/Chaos) - 元:INFP
  'PFEC_F': {
    name: '悲劇のヒロイン',
    best_reason: '彼は世話焼きで、愛情表現が豊かなタイプです。あなたの自信のなさや不安を、「君は可愛いよ」「大丈夫だよ」と全肯定して包み込んでくれます。彼の過保護な愛は、あなたにとって最高の安心材料となり、心を開くことができるでしょう。',
    worst_reason: '彼は超現実主義で、言葉よりも行動を重視します。あなたの「もっと愛を囁いて」「お姫様みたいに扱って」という要望を、「面倒くさい」「ドラマの見過ぎ」と一蹴します。彼のドライな態度にあなたは深く傷つき、絶望するでしょう。'
  }
} as const;

// 相性情報を取得
export function getCompatibility(characterCode: string) {
  const id = getCharacterIdByCode(characterCode);
  if (!id || !compatibilityMatrix[id as keyof typeof compatibilityMatrix]) {
    return null;
  }
  
  const compatibility = compatibilityMatrix[id as keyof typeof compatibilityMatrix];
  
  return {
    best: compatibility.best,
    worst: compatibility.worst
  };
}

// 詳細相性理由を取得
export function getDetailedCompatibilityReason(userCharacterCode: string, userGender: 'male' | 'female', partnerType: 'best' | 'worst') {
  // ユーザーキャラクターのキーを生成
  const genderSuffix = userGender === 'male' ? '_M' : '_F';
  const userKey = `${userCharacterCode}${genderSuffix}` as keyof typeof detailedCompatibilityReasons;
  
  // ユーザーキャラクターの詳細データを取得
  const userCharacterData = detailedCompatibilityReasons[userKey];
  if (!userCharacterData) {
    return null;
  }
  
  // 理由を返す
  return partnerType === 'best' ? userCharacterData.best_reason : userCharacterData.worst_reason;
}